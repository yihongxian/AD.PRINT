{"version":3,"sources":["pages/Catalog/model.js","pages/Category/model.js","pages/FileInput/model.js","utils/storages.js","consts/route.js","layouts/HeaderMenu/index.jsx","consts/form.js","shares/DragTable/index.jsx","pages/FileInput/CreateForm/CatalogInfo/PageNumSlider/index.js","consts/config.js","pages/FileInput/CreateForm/CatalogInfo/index.js","pages/FileInput/CreateForm/index.js","pages/FileInput/SiderContinar/CollapseView/CollapseViewItem/index.jsx","pages/FileInput/SiderContinar/CollapseView/index.jsx","pages/FileInput/SiderContinar/DownloadButton/index.jsx","pages/FileInput/SiderContinar/index.jsx","pages/FileInput/index.jsx","shares/PageArrange/Spacing/index.jsx","shares/PageArrange/TextAlign/index.jsx","shares/PageArrange/index.jsx","shares/OperateGroups/index.jsx","pages/Catalog/CatalogList/TableView/index.jsx","pages/Catalog/CatalogList/ModifyModal/index.jsx","pages/Catalog/validation.js","pages/Catalog/CatalogList/CreateButton/index.jsx","pages/Catalog/CatalogList/index.jsx","pages/Category/CategoryList/TableView/index.jsx","pages/Category/CategoryList/CreateButton/index.jsx","pages/Category/validation.js","pages/Category/CategoryList/ModifyCategoryModal/SubCategory/index.jsx","pages/Category/CategoryList/ModifyCategoryModal/index.jsx","pages/Category/CategoryList/ModifyRelationModal/index.jsx","pages/Category/CategoryList/index.jsx","layouts/RouteConfig/index.jsx","layouts/index.jsx","serviceWorker.js","index.js"],"names":["initialState","fromJS","editModalInfo","visible","dataSource","catalogStorage","getItem","namespace","state","subscriptions","effects","reducers","removeCatalog","index","payload","newState","deleteIn","setItem","get","toJS","modifyCatalogs","withMutations","insertIndex","id","isCreate","newCatalog","pn","name","size","Date","now","findIndex","item","setIn","set","updateEditModalInfo","relationModalInfo","relations","relationStorage","categoryStorage","removeCategory","modifyCategories","newCategory","children","length","isDefault","showRelationModal","categoryId","targetKeys","reduce","prev","push","List","hideRelationModal","Map","updateTargetKeys","confirmSaveRelations","newRelations","toSet","filterNot","current","forEach","catalogId","add","toList","updateRelationModalInfo","firstLevelCategoryId","undefined","secondLevelCategoryOptions","setup","dispatch","history","listen","pathname","PathEnum","FILE_INPUT","type","resetState","fileStorage","onFirstLevelCategoryChange","firstId","options","onSecondLevelCategoryChange","saveFile","time","catalogs","secondLevelCategory","firstLevelCategory","files","valueOf","checked","pick","sort","a","b","message","success","removeFile","newFiles","filter","modifyFile","find","ArrayLocalStorage","key","this","value","localStorage","JSON","parse","e","console","error","isArray","stringify","CATALOG","CATALOG_LIST","CATEGORY","CATEGORY_LIST","CATEGORY_CREATE","CATEGORY_MODIFY","LinkConfigList","linkTo","iconType","linkDesc","Header","Layout","headerStyle","width","zIndex","position","padding","backgroundColor","menuStyle","lineHeight","exportConfigStyle","top","right","HeaderMenu","selectedKeys","path","link","config","pathToRegexp","exec","getSelectedKey","props","location","style","mode","map","Item","to","React","Component","withRouter","modalFormItemLayout","labelCol","span","wrapperCol","pageFormItemLayout","xs","sm","dragingIndex","rowSource","beginDrag","canDrag","isFocus","BodyRow","isOver","connectDragSource","connectDropTarget","restProps","moveRow","cursor","className","DragableBodyRow","DropTarget","drop","monitor","dragIndex","hoverIndex","connect","dropTarget","DragSource","dragSource","DragTable","rowKey","onRow","columns","pagination","backend","HTML5Backend","components","body","row","inputNumberStyle","PageNumSlider","handleChange","setState","isUpdate","handleAfterChange","onChange","onFocusChange","prevValue","nextProps","nextState","isEqual","disabled","align","max","isInteger","onAfterChange","offset","min","onBlur","onFocus","prevState","CatalogInfo","handleFocusChange","handlePageNumChange","newValue","newItem","getColumns","title","dataIndex","render","text","color","onCell","onClick","event","stopPropagation","handleRow","bind","record","dragRow","update","$splice","catalog","Form","Group","Radio","Option","Select","cardDefaultProps","marginBottom","CreateForm","handleSubmit","preventDefault","form","validateFields","err","values","firstLevelCategoryOptions","formRef","context","getFieldDecorator","ref","onSubmit","label","rules","required","placeholder","showSearch","htmlType","contextTypes","PropTypes","object","category","fileInput","allCatalogs","create","onValuesChange","changedValues","allValues","hasOwnProperty","firstIndex","getIn","newCatalogs","catalogIndex","setTimeout","setFieldsValue","CollapseViewItem","handleRemove","onRemove","Modal","confirm","content","onOk","justify","CollapseView","categories","subCategories","subIndex","subItem","fileEntrySeq","groupBy","entrySeq","defaultActiveKey","Panel","header","getCategoryName","extra","count","covers","onModify","handleModifyFile","DownloadButton","margin","divStyle","height","SiderContinar","Fragment","Sider","Content","contentStyle","marginRight","FileInput","createRef","getChildContext","theme","childContextTypes","Spacing","TextAlign","textAlign","wrapperStyle","PageArrange","PageSpacing","PageTextAlign","OperateGroups","CatalogTable","showModal","footer","bordered","PureComponent","mapDispatch","ModifyModal","handleOk","Promise","resolve","reject","force","errors","params","closeModal","extraData","contrast","defaultPn","defaultName","onCancel","maskClosable","destroyOnClose","initialValue","validator","rule","callback","trim","catalogsValidation","CreateButton","CatalogList","TableView","CategoryTable","showModifyModal","textType","code","Text","option","handleModify","groups","getDataSource","childrenColumnName","subCategoriesValidation","some","transformValue","SubCategory","handleCreate","handleInputBlur","handleInputChange","href","actions","target","ModifyCategoryModal","defaultChildren","categoriesValidation","ModifyRelationModal","CategoryList","overflow","overflowY","RouteConfig","component","LayoutWrapper","Boolean","window","hostname","match","createHashHistory","require","app","dva","model","default","router","App","start","ReactDOM","locale","zhCN","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.807e7434.chunk.js","sourcesContent":["import { fromJS } from \"immutable\";\n\nimport { catalogStorage } from \"@utils/storages\";\n\nconst initialState = fromJS({\n  editModalInfo: {\n    visible: false\n  },\n\n  dataSource: catalogStorage.getItem() || []\n});\n\nexport default {\n  namespace: \"catalog\",\n  state: initialState,\n  subscriptions: {},\n  effects: {},\n  reducers: {\n    removeCatalog: (state, { payload: index }) => {\n      const newState = state.deleteIn([\"dataSource\", index]);\n      catalogStorage.setItem(newState.get(\"dataSource\").toJS());\n      return newState;\n    },\n    modifyCatalogs: (state, { payload }) =>\n      state.withMutations(newState => {\n        const dataSource = newState.get(\"dataSource\");\n        const { id, isCreate } = newState.get(\"editModalInfo\").toJS();\n\n        let insertIndex;\n        const newCatalog = {\n          pn: payload.pn,\n          name: payload.name\n        };\n\n        if (isCreate) {\n          insertIndex = dataSource.size;\n          newCatalog.id = Date.now();\n        } else {\n          insertIndex = dataSource.findIndex(item => item.get(\"id\") === id);\n          newCatalog.id = id;\n        }\n\n        newState.setIn([\"dataSource\", insertIndex], fromJS(newCatalog));\n        catalogStorage.setItem(newState.get(\"dataSource\").toJS());\n        newState.set(\"editModalInfo\", fromJS({ visible: false }));\n      }),\n    updateEditModalInfo: (state, { payload }) =>\n      state.set(\"editModalInfo\", fromJS(payload))\n  }\n};\n","import { fromJS, Map, List } from 'immutable';\n\nimport { categoryStorage, relationStorage } from '@utils/storages';\n\nconst initialState = fromJS({\n  editModalInfo: {\n    visible: false,\n  },\n\n  relationModalInfo: {\n    visible: false,\n  },\n\n  relations: relationStorage.getItem() || [],\n\n  dataSource: categoryStorage.getItem() || [],\n});\n\nexport default {\n  namespace: 'category',\n  state: initialState,\n  subscriptions: {},\n  effects: {},\n  reducers: {\n    removeCategory: (state, { payload }) => {\n      const newState = state.deleteIn(['dataSource', payload]);\n      categoryStorage.setItem(newState.get('dataSource').toJS());\n      return newState;\n    },\n    modifyCategories: (state, { payload }) =>\n      state.withMutations(newState => {\n        const dataSource = newState.get('dataSource');\n        const { id, isCreate } = newState.get('editModalInfo').toJS();\n\n        let insertIndex;\n        const newCategory = { name: payload.name };\n\n        if (isCreate) {\n          newCategory.id = Date.now();\n          insertIndex = dataSource.size;\n        } else {\n          newCategory.id = id;\n          insertIndex = dataSource.findIndex(item => item.get('id') === id);\n        }\n\n        if (payload.children && payload.children.length) {\n          newCategory.children = payload.children;\n        } else {\n          newCategory.children = [\n            { id: newCategory.id, name: '默认', isDefault: true },\n          ];\n        }\n\n        newState.setIn(['dataSource', insertIndex], fromJS(newCategory));\n        categoryStorage.setItem(newState.get('dataSource').toJS());\n        newState.set('editModalInfo', fromJS({ visible: false }));\n      }),\n    updateEditModalInfo: (state, { payload }) =>\n      state.set('editModalInfo', fromJS(payload)),\n\n    showRelationModal: (state, { payload: categoryId }) =>\n      state.withMutations(newState => {\n        const targetKeys = newState\n          .get('relations')\n          .reduce(\n            (prev, item) =>\n              item.get('categoryId') === categoryId\n                ? prev.push(item.get('catalogId'))\n                : prev,\n            List(),\n          );\n        newState.set(\n          'relationModalInfo',\n          fromJS({ visible: true, categoryId, targetKeys }),\n        );\n      }),\n\n    hideRelationModal: state =>\n      state.set('relationModalInfo', Map({ visible: false })),\n\n    updateTargetKeys: (state, { payload: targetKeys }) =>\n      state.setIn(['relationModalInfo', 'targetKeys'], List(targetKeys)),\n\n    confirmSaveRelations: state =>\n      state.withMutations(newState => {\n        const relationModalInfo = newState.get('relationModalInfo');\n        const categoryId = relationModalInfo.get('categoryId');\n\n        const newRelations = newState\n          .get('relations')\n          .toSet()\n          .filterNot(item => item.get('categoryId') === categoryId)\n          .withMutations(current => {\n            relationModalInfo.get('targetKeys').forEach(catalogId => {\n              current.add(Map({ categoryId, catalogId }));\n            });\n          });\n\n\n        relationStorage.setItem(newRelations.toJS());\n        newState.set('relations', newRelations.toList());\n        newState.set('relationModalInfo', Map({ visible: false }));\n      }),\n\n    updateRelationModalInfo: (state, { payload }) =>\n      state.set('relationModalInfo', fromJS(payload)),\n  },\n};\n","import { pick } from 'lodash';\nimport { fromJS, Map } from 'immutable';\n\nimport { PathEnum } from '@consts/route';\nimport { fileStorage } from '@utils/storages';\nimport { message } from 'antd';\n\nconst transformFiles = files => {\n  if (!files) {\n    return [];\n  } else {\n    return Object.entries(\n      files.reduce(\n        (prev, file) => ({\n          ...prev,\n          [file.categoryId]: (prev[file.categoryId] || []).concat(file),\n        }),\n        {},\n      ),\n    );\n  }\n};\n\nconst initialState = fromJS({\n  firstLevelCategoryId: undefined,\n  secondLevelCategoryOptions: [],\n});\n\nexport default {\n  namespace: 'fileInput',\n  state: Map(),\n  subscriptions: {\n    setup({ dispatch, history }) {\n      history.listen(({ pathname }) => {\n        if (pathname === PathEnum.FILE_INPUT) {\n          dispatch({ type: 'resetState' });\n        }\n      });\n    },\n  },\n  effects: {},\n  reducers: {\n    resetState: () =>\n      initialState.set('files', fromJS(fileStorage.getItem() || [])),\n\n    onFirstLevelCategoryChange: (state, { payload }) =>\n      state.withMutations(newState => {\n        newState.set('firstLevelCategoryId', payload.firstId);\n        newState.set('secondLevelCategoryOptions', payload.options);\n      }),\n\n    onSecondLevelCategoryChange: (state, { payload }) =>\n      state.set('secondLevelCategoryId', payload),\n\n    saveFile: (state, { payload }) => {\n      const {\n        time,\n        catalogs,\n        firstLevelCategory,\n        secondLevelCategory,\n        ...current\n      } = payload;\n\n      const files = fileStorage.getItem() || [];\n\n      current.id = Date.now();\n      current.time = time.valueOf();\n      current.categoryId = secondLevelCategory;\n      current.catalogs = catalogs\n        .reduce(\n          (prev, item) =>\n            item.checked ? [...prev, pick(item, ['id', 'pn', 'name'])] : prev,\n          [],\n        )\n        .sort((a, b) => a.pn - b.pn);\n      files.push(current);\n\n      fileStorage.setItem(files);\n\n      message.success('新增成功！');\n\n      return state.set('files', fromJS(files));\n    },\n\n    removeFile: (state, { payload }) => {\n      const files = fileStorage.getItem();\n\n      const newFiles = files.filter(item => item.id !== payload);\n\n      fileStorage.setItem(newFiles);\n\n      message.success('删除成功！');\n\n      return state.set('files', fromJS(newFiles));\n    },\n\n    modifyFile: (state, { payload }) => {\n      const files = fileStorage.getItem();\n\n      const file = files.find(item => item.id === payload);\n\n      return state;\n    },\n  },\n};\n","import { isArray } from 'lodash';\nimport localStorage from 'localStorage';\n\nclass ArrayLocalStorage {\n  constructor(key) {\n    this.key = key;\n  }\n\n  getItem() {\n    const value = localStorage.getItem(this.key);\n    if (typeof value === 'string') {\n      try {\n        return JSON.parse(value);\n      } catch (e) {\n        console.error(e);\n      }\n    } else {\n      return null;\n    }\n  }\n  setItem(value) {\n    if (isArray(value)) {\n      localStorage.setItem(this.key, JSON.stringify(value));\n    } else {\n      console.error('保存的数据应该是数组');\n    }\n  }\n}\n\nexport const fileStorage = new ArrayLocalStorage('files');\n\nexport const catalogStorage = new ArrayLocalStorage('catalogs');\n\nexport const relationStorage = new ArrayLocalStorage('relations');\n\nexport const categoryStorage = new ArrayLocalStorage('categories');\n","export const PathEnum = {\n  CATALOG: \"/catalog\",\n  CATALOG_LIST: \"/catalog/list\",\n  CATEGORY: \"/category\",\n  CATEGORY_LIST: \"/category/list\",\n  CATEGORY_CREATE: \"/category/create\",\n  CATEGORY_MODIFY: \"/category/modify/:id\",\n\n  FILE_INPUT: \"/file/input\"\n};\n\nexport const LinkConfigList = [\n  {\n    key: \"home\",\n    linkTo: PathEnum.FILE_INPUT,\n    iconType: \"home\",\n    linkDesc: \"主页\"\n  },\n  {\n    key: \"catalog\",\n    linkTo: PathEnum.CATALOG,\n    iconType: \"profile\",\n    linkDesc: \"目录\"\n  },\n  {\n    key: \"category\",\n    linkTo: PathEnum.CATEGORY,\n    iconType: \"copy\",\n    linkDesc: \"分类\"\n  }\n];\n","import React from 'react';\nimport { pathToRegexp } from 'path-to-regexp';\nimport { Link, withRouter } from 'dva/router';\nimport { Layout, Menu, Icon, Button } from 'antd';\n\nimport { LinkConfigList } from '@consts/route';\n\nconst { Header } = Layout;\n\nconst headerStyle = {\n  width: '100%',\n  zIndex: 1,\n  position: 'fixed',\n  padding: 0,\n  backgroundColor: 'white',\n};\n\nconst menuStyle = { lineHeight: '62px' };\n\nconst exportConfigStyle = { position: 'absolute', top: 0, right: 20 };\n\nfunction getSelectedKey(path) {\n  const link = LinkConfigList.find(\n    config =>\n      pathToRegexp(config.linkTo).exec(path) ||\n      pathToRegexp(`${config.linkTo}/(.*)`).exec(path),\n  );\n\n  if (link) {\n    return [link.key];\n  }\n\n  return [];\n}\n\nclass HeaderMenu extends React.Component {\n  render() {\n    const { location } = this.props;\n    const selectedKeys = getSelectedKey(location.pathname);\n    return (\n      <Header style={headerStyle}>\n        <Menu mode=\"horizontal\" selectedKeys={selectedKeys} style={menuStyle}>\n          {LinkConfigList.map(config => (\n            <Menu.Item key={config.key}>\n              <Link to={config.linkTo}>\n                <Icon type={config.iconType} />\n                <span>{config.linkDesc}</span>\n              </Link>\n            </Menu.Item>\n          ))}\n        </Menu>\n        <div style={exportConfigStyle}>\n          <Button type=\"dashed\">导出配置</Button>\n        </div>\n      </Header>\n    );\n  }\n}\n\nexport default withRouter(HeaderMenu);\n","export const modalFormItemLayout = {\n  labelCol: { span: 7 },\n  wrapperCol: { span: 15 }\n};\n\nexport const pageFormItemLayout = {\n  labelCol: {\n    xs: { span: 24 },\n    sm: { span: 8 }\n  },\n  wrapperCol: {\n    xs: { span: 24 },\n    sm: { span: 14 }\n  }\n};\n","import React from 'react';\nimport { Table } from 'antd';\nimport HTML5Backend from 'react-dnd-html5-backend';\nimport { DndProvider, DragSource, DropTarget } from 'react-dnd';\n\nconst rowTarget = {\n  drop(props, monitor) {\n    const dragIndex = monitor.getItem().index;\n    const hoverIndex = props.index;\n\n    // Don't replace items with themselves\n    if (dragIndex === hoverIndex) {\n      return;\n    }\n\n    // Time to actually perform the action\n    props.moveRow(dragIndex, hoverIndex);\n\n    // Note: we're mutating the monitor item here!\n    // Generally it's better to avoid mutations,\n    // but it's good here for the sake of performance\n    // to avoid expensive index searches.\n    monitor.getItem().index = hoverIndex;\n  },\n};\n\nlet dragingIndex = -1;\n\nconst rowSource = {\n  beginDrag(props) {\n    dragingIndex = props.index;\n    return {\n      index: props.index,\n    };\n  },\n  canDrag(props) {\n    return !props.isFocus;\n  },\n};\n\nclass BodyRow extends React.Component {\n  render() {\n    const {\n      isOver,\n      isFocus,\n      connectDragSource,\n      connectDropTarget,\n      moveRow,\n      ...restProps\n    } = this.props;\n    const style = { ...restProps.style, cursor: 'move' };\n\n    let { className } = restProps;\n    if (isOver) {\n      if (restProps.index > dragingIndex) {\n        className += ' drop-over-downward';\n      }\n      if (restProps.index < dragingIndex) {\n        className += ' drop-over-upward';\n      }\n    }\n\n    return connectDragSource(\n      connectDropTarget(\n        <tr {...restProps} className={className} style={style} />,\n      ),\n    );\n  }\n}\n\nconst DragableBodyRow = DropTarget('row', rowTarget, (connect, monitor) => ({\n  connectDropTarget: connect.dropTarget(),\n  isOver: monitor.isOver(),\n}))(\n  DragSource('row', rowSource, connect => ({\n    connectDragSource: connect.dragSource(),\n  }))(BodyRow),\n);\n\nclass DragTable extends React.Component {\n  render() {\n    const { size, rowKey, onRow, columns, dataSource, pagination } = this.props;\n    return (\n      <DndProvider backend={HTML5Backend}>\n        <Table\n          size={size}\n          rowKey={rowKey}\n          columns={columns}\n          dataSource={dataSource}\n          pagination={pagination}\n          onRow={onRow}\n          components={{\n            body: {\n              row: DragableBodyRow,\n            },\n          }}\n        />\n      </DndProvider>\n    );\n  }\n}\n\nexport default DragTable;\n","import React from 'react';\nimport { isEqual, isInteger } from 'lodash';\nimport { Row, Col, Slider, InputNumber } from 'antd';\n\nimport { MIN_PAGE_NUMBER, MAX_PAGE_NUMBER } from '@consts/config';\n\nconst inputNumberStyle = { width: '100%' };\n\nclass PageNumSlider extends React.Component {\n  constructor(props) {\n    super(props);\n    const prevValue = props.value;\n    this.state = {\n      value: prevValue,\n      isUpdate: false,\n      prevValue,\n    };\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (!isEqual(nextProps.value, prevState.prevValue)) {\n      const prevValue = nextProps.value;\n      return { value: prevValue, prevValue };\n    }\n    return null;\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (\n      !isEqual(nextProps.disabled, this.props.disabled) ||\n      !isEqual(nextState.value, this.state.value)\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  handleChange = value => {\n    this.setState({ value, isUpdate: true });\n  };\n\n  handleAfterChange = () => {\n    const { value, isUpdate } = this.state;\n    const { onChange, onFocusChange } = this.props;\n\n    onFocusChange(false);\n\n    isUpdate &&\n      this.setState({ isUpdate: false }, () => {\n        onChange && onChange(value);\n      });\n  };\n\n  render() {\n    const { value } = this.state;\n    const { disabled, onFocusChange } = this.props;\n    return (\n      <Row type=\"flex\" align=\"middle\">\n        <Col span={16}>\n          <Slider\n            max={MAX_PAGE_NUMBER}\n            value={isInteger(value) ? value : 0}\n            onChange={this.handleChange}\n            onAfterChange={this.handleAfterChange}\n            disabled={disabled}\n          />\n        </Col>\n        <Col span={6} offset={1}>\n          <InputNumber\n            min={MIN_PAGE_NUMBER}\n            max={MAX_PAGE_NUMBER}\n            value={value}\n            onBlur={this.handleAfterChange}\n            onFocus={() => onFocusChange(true)}\n            onChange={this.handleChange}\n            disabled={disabled}\n            style={inputNumberStyle}\n          />\n        </Col>\n      </Row>\n    );\n  }\n}\n\nexport default PageNumSlider;\n","export const MIN_PAGE_NUMBER = 0;\nexport const MAX_PAGE_NUMBER = 300;\n","import React from 'react';\nimport update from 'immutability-helper';\nimport { connect } from 'dva';\nimport { Checkbox } from 'antd';\n\nimport DragTable from '@shares/DragTable';\n\nimport PageNumSlider from './PageNumSlider';\n\nimport './index.css';\n\nclass CatalogInfo extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.handleRow = this.handleRow.bind(this);\n  }\n\n  handleRow(record, index) {\n    const { isFocus } = this.state;\n    const { onChange } = this.props;\n\n    return {\n      index,\n      isFocus,\n      moveRow: (dragIndex, hoverIndex) => {\n        const { value } = this.props;\n        const dragRow = value[dragIndex];\n        const newValue = update(value, {\n          $splice: [\n            [dragIndex, 1],\n            [hoverIndex, 0, dragRow],\n          ],\n        });\n        onChange(newValue);\n      },\n      onClick: () => {\n        const { value } = this.props;\n        const newValue = [...value];\n        const newItem = newValue[index];\n        newValue[index] = { ...newItem, checked: !newItem.checked };\n        onChange(newValue);\n      },\n    };\n  }\n\n  handleFocusChange = isFocus => {\n    this.setState({ isFocus });\n  };\n\n  handlePageNumChange = index => pn => {\n    const { value, onChange } = this.props;\n    const newValue = [...value];\n    const newItem = newValue[index];\n    newValue[index] = { ...newItem, pn };\n    onChange(newValue);\n  };\n\n  getColumns = () => {\n    return [\n      {\n        width: 200,\n        title: '题目名称',\n        dataIndex: 'name',\n        render: (text, item, index) =>\n          item.checked ? text : <span style={{ color: 'gray' }}>{text}</span>,\n      },\n      {\n        width: 400,\n        title: '页号',\n        dataIndex: 'pn',\n        render: (text, item, index) => (\n          <PageNumSlider\n            value={text}\n            disabled={!item.checked}\n            onChange={this.handlePageNumChange(index)}\n            onFocusChange={this.handleFocusChange}\n          />\n        ),\n        onCell: () => ({\n          onClick: event => {\n            event.stopPropagation();\n          },\n        }),\n      },\n      {\n        width: 80,\n        title: '选择',\n        dataIndex: 'checked',\n        render: text => <Checkbox checked={text} />,\n      },\n    ];\n  };\n\n  render() {\n    const { value } = this.props;\n    return (\n      <DragTable\n        size=\"small\"\n        rowKey=\"id\"\n        columns={this.getColumns()}\n        dataSource={value}\n        onRow={this.handleRow}\n        pagination={false}\n      />\n    );\n  }\n}\n\nconst mapState = ({ catalog }) => ({\n  catalogs: catalog.get('dataSource'),\n});\n\nexport default connect(mapState)(CatalogInfo);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from 'dva';\nimport { List, Map } from 'immutable';\nimport { Card, Form, Button, Input, DatePicker, Select, Radio } from 'antd';\n\nimport { pageFormItemLayout } from '@consts/form';\n\nimport CatalogInfo from './CatalogInfo';\n\nconst { Item } = Form;\nconst { Group } = Radio;\nconst { Option } = Select;\n\nconst cardDefaultProps = { size: 'small', style: { marginBottom: 15 } };\n\nclass CreateForm extends React.Component {\n  static contextTypes = {\n    formRef: PropTypes.object,\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    const { form, saveFile } = this.props;\n    form.validateFields((err, values) => {\n      !err && saveFile(values);\n    });\n  };\n\n  render() {\n    const {\n      form,\n      firstLevelCategoryId,\n      firstLevelCategoryOptions,\n      secondLevelCategoryOptions,\n    } = this.props;\n\n    const { formRef } = this.context;\n\n    const { getFieldDecorator } = form;\n\n    return (\n      <Form ref={formRef} onSubmit={this.handleSubmit} {...pageFormItemLayout}>\n        <Card title=\"文件分类\" {...cardDefaultProps}>\n          <Item label=\"一级分类\">\n            {getFieldDecorator('firstLevelCategory', {\n              rules: [{ required: true, message: '文件类型不能为空' }],\n            })(\n              <Select placeholder=\"请选择文件分类\" showSearch>\n                {firstLevelCategoryOptions.toJS().map(({ id, name }) => (\n                  <Option key={id} value={id}>\n                    {name}\n                  </Option>\n                ))}\n              </Select>,\n            )}\n          </Item>\n          {firstLevelCategoryId && (\n            <Item label=\"二级分类\">\n              {getFieldDecorator('secondLevelCategory')(\n                <Group options={secondLevelCategoryOptions.toJS()} />,\n              )}\n            </Item>\n          )}\n        </Card>\n\n        <Card title=\"基础设置\" {...cardDefaultProps}>\n          <Item label=\"第一行封面内容\">\n            {getFieldDecorator('covers[0]', {\n              rules: [{ required: true, message: '第一行封面内容不能为空' }],\n            })(<Input placeholder=\"请输入第一行封面内容\" />)}\n          </Item>\n          <Item label=\"第二行封面内容\">\n            {getFieldDecorator('covers[1]')(\n              <Input placeholder=\"请输入第二行封面内容\" />,\n            )}\n          </Item>\n          <Item label=\"立卷人\">\n            {getFieldDecorator('creater', {\n              rules: [{ required: true, message: '立卷人不能为空' }],\n            })(<Input placeholder=\"请输入立卷人名称\" />)}\n          </Item>\n          <Item label=\"检查人\">\n            {getFieldDecorator('checker', {\n              rules: [{ required: true, message: '检查人不能为空' }],\n            })(<Input placeholder=\"请输入检查人名称\" />)}\n          </Item>\n          <Item label=\"申请时间\">\n            {getFieldDecorator('time', {\n              rules: [{ required: true, message: '申请时间不能为空' }],\n            })(<DatePicker style={{ width: '100%' }} />)}\n          </Item>\n        </Card>\n\n        <Card title=\"目录设置\" {...cardDefaultProps}>\n          {getFieldDecorator('catalogs')(<CatalogInfo />)}\n        </Card>\n\n        <Card {...cardDefaultProps}>\n          <Button type=\"primary\" htmlType=\"submit\" style={{ width: '100%' }}>\n            保存\n          </Button>\n        </Card>\n      </Form>\n    );\n  }\n}\n\nconst mapState = ({ category, catalog, fileInput }) => ({\n  relations: category.get('relations'),\n  allCatalogs: catalog.get('dataSource'),\n  firstLevelCategoryId: fileInput.get('firstLevelCategoryId'),\n  firstLevelCategoryOptions: category.get('dataSource'),\n  secondLevelCategoryOptions: fileInput.get('secondLevelCategoryOptions'),\n});\n\nconst mapDispatch = {\n  saveFile: payload => ({\n    type: 'fileInput/saveFile',\n    payload,\n  }),\n  onFirstLevelCategoryChange: payload => ({\n    type: 'fileInput/onFirstLevelCategoryChange',\n    payload,\n  }),\n  onSecondLevelCategoryChange: payload => ({\n    type: 'fileInput/onSecondLevelCategoryChange',\n    payload,\n  }),\n};\n\nexport default connect(\n  mapState,\n  mapDispatch,\n)(\n  Form.create({\n    onValuesChange(props, changedValues, allValues) {\n      if (changedValues.hasOwnProperty('firstLevelCategory')) {\n        const {\n          form,\n          relations,\n          allCatalogs,\n          firstLevelCategoryOptions,\n          onFirstLevelCategoryChange,\n        } = props;\n\n        const firstId = changedValues.firstLevelCategory;\n        const firstIndex = firstLevelCategoryOptions.findIndex(\n          item => item.get('id') === firstId,\n        );\n\n        const options = firstLevelCategoryOptions\n          .getIn([firstIndex, 'children'], List())\n          .map(item =>\n            Map({\n              label: item.get('name'),\n              value: item.get('id'),\n              disabled: item.get('isDefault'),\n            }),\n          );\n\n        const catalogs = allCatalogs\n          .withMutations(newCatalogs => {\n            relations.forEach(item => {\n              if (item.get('categoryId') === firstId) {\n                const catalogIndex = newCatalogs.findIndex(\n                  catalog => catalog.get('id') === item.get('catalogId'),\n                );\n                catalogIndex >= 0 &&\n                  newCatalogs.setIn([catalogIndex, 'checked'], true);\n              }\n            });\n          })\n          .toJS();\n\n        onFirstLevelCategoryChange({ firstId, options });\n        setTimeout(() => {\n          form.setFieldsValue({\n            secondLevelCategory: options.getIn([0, 'value']),\n            catalogs,\n          });\n        });\n      } else if (changedValues.hasOwnProperty('secondLevelCategory')) {\n        const { onSecondLevelCategoryChange } = props;\n        onSecondLevelCategoryChange(changedValues.secondLevelCategory);\n      }\n    },\n  })(CreateForm),\n);\n","import React from 'react';\nimport { Row, Col, Icon, Modal } from 'antd';\n\nclass CollapseViewItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleRemove = this.handleRemove.bind(this);\n  }\n\n  handleRemove() {\n    const { id, name, onRemove } = this.props;\n    Modal.confirm({\n      title: `确认要删除文件 ${name} 吗？`,\n      content: '删除后不可恢复，请谨慎操作！',\n      onOk() {\n        onRemove(id);\n      },\n    });\n  }\n\n  render() {\n    const { name } = this.props;\n    return (\n      <Row\n        type=\"flex\"\n        align=\"middle\"\n        justify=\"space-between\"\n        className=\"huali-file-item\"\n      >\n        <Col>{name}</Col>\n        <Col>\n          <Icon type=\"close-square\" onClick={this.handleRemove} />\n        </Col>\n      </Row>\n    );\n  }\n}\n\nexport default CollapseViewItem;\n","import React from 'react';\nimport { connect } from 'dva';\nimport { Collapse, Badge } from 'antd';\n\nimport CollapseViewItem from './CollapseViewItem';\n\nconst transformCovers = covers => {\n  if (covers[1]) {\n    return `${covers[0]}(${covers[1]})`;\n  } else {\n    return covers[0];\n  }\n};\n\nclass CollapseView extends React.Component {\n  getCategoryName(id) {\n    const { categories } = this.props;\n    return categories.reduce((prev, item) => {\n      if (prev) {\n        return prev;\n      }\n      const subCategories = item.get('children');\n      const subIndex = subCategories.findIndex(\n        subItem => subItem.get('id') === id,\n      );\n      if (subIndex === -1) {\n        return prev;\n      } else {\n        const subItem = subCategories.get(subIndex);\n        if (subItem.get('id') === item.get('id')) {\n          return item.get('name');\n        } else {\n          return `${item.get('name')}(${subItem.get('name')})`;\n        }\n      }\n    }, undefined);\n  }\n  render() {\n    const { files, removeFile } = this.props;\n    const fileEntrySeq = files\n      .groupBy(item => item.get('categoryId'))\n      .entrySeq();\n\n    return (\n      <div className=\"huali-file-collapse-wrapper\">\n        <Collapse defaultActiveKey={fileEntrySeq.getIn([0, 0])}>\n          {fileEntrySeq.toJS().map(([categoryId, files]) => (\n            <Collapse.Panel\n              key={categoryId}\n              header={this.getCategoryName(categoryId)}\n              extra={<Badge count={files.length} />}\n            >\n              {files.map(item => (\n                <CollapseViewItem\n                  key={item.id}\n                  id={item.id}\n                  name={transformCovers(item.covers)}\n                  onRemove={removeFile}\n                  onModify={this.handleModifyFile}\n                />\n              ))}\n            </Collapse.Panel>\n          ))}\n        </Collapse>\n      </div>\n    );\n  }\n}\n\nconst mapState = ({ category, fileInput }) => ({\n  files: fileInput.get('files'),\n  categories: category.get('dataSource'),\n});\n\nconst mapDispatch = {\n  removeFile: payload => ({ type: 'fileInput/removeFile', payload }),\n};\n\nexport default connect(mapState, mapDispatch)(CollapseView);\n","import React from 'react';\nimport { Button } from 'antd';\nimport { connect } from 'dva';\n\nclass DownloadButton extends React.Component {\n  render() {\n    const { count } = this.props;\n\n    return (\n      <div style={{ margin: 10 }}>\n        <Button style={{ width: '100%' }}>\n          {`已设置 ${count} 个文件，全部导出`}\n        </Button>\n      </div>\n    );\n  }\n}\n\nconst mapState = ({ fileInput }) => ({\n  count: fileInput.get('files').size,\n});\n\nexport default connect(mapState)(DownloadButton);\n","import React from 'react';\n\nimport CollapseView from './CollapseView';\nimport DownloadButton from './DownloadButton';\n\nimport './index.css';\n\nconst divStyle = {\n  width: '100%',\n  height: 8,\n  backgroundColor: '#f0f2f5',\n};\n\nfunction SiderContinar() {\n  return (\n    <React.Fragment>\n      <CollapseView />\n      <div style={divStyle} />\n      <DownloadButton />\n    </React.Fragment>\n  );\n}\n\nexport default SiderContinar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Layout } from 'antd';\n\nimport CreateForm from './CreateForm';\n\nimport SiderContinar from './SiderContinar';\n\nconst { Sider, Content } = Layout;\n\nconst contentStyle = {\n  marginRight: 410,\n};\n\nclass FileInput extends React.Component {\n  formRef = React.createRef();\n\n  static childContextTypes = {\n    formRef: PropTypes.object,\n  };\n\n  getChildContext = () => ({\n    formRef: this.formRef,\n  });\n\n  render() {\n    return (\n      <Layout>\n        <Content style={contentStyle}>\n          <CreateForm />\n        </Content>\n        <Sider theme=\"light\" width={400} className=\"huali-file-sider\">\n          <SiderContinar />\n        </Sider>\n      </Layout>\n    );\n  }\n}\n\nexport default FileInput;\n","import React from 'react';\n\nconst divStyle = {\n  width: '100%',\n  height: '8px',\n};\n\nfunction Spacing() {\n  return <div style={divStyle} />;\n}\n\nexport default Spacing;\n","import React from \"react\";\n\nfunction TextAlign({ align, children }) {\n  const style = { textAlign: \"left\" };\n  if (align === \"right\") {\n    style.textAlign = \"right\";\n  }\n  return <div style={style}>{children}</div>;\n}\n\nexport default TextAlign;\n","import React from \"react\";\n\nimport Spacing from \"./Spacing\";\nimport TextAlign from \"./TextAlign\";\n\nconst wrapperStyle = {\n  padding: 10,\n  backgroundColor: \"rgb(255, 255, 255)\"\n};\n\nfunction PageArrange({ children }) {\n  return <div style={wrapperStyle}>{children}</div>;\n}\n\nPageArrange.PageSpacing = Spacing;\n\nPageArrange.PageTextAlign = TextAlign;\n\nexport default PageArrange;\n","import React from \"react\";\nimport { Button, Divider } from \"antd\";\n\nimport \"./index.css\";\n\nfunction OperateGroups({ options }) {\n  return options.map(({ text, onClick }, index) => (\n    <React.Fragment key={index}>\n      {index > 0 && <Divider type=\"vertical\" />}\n      <Button\n        type=\"link\"\n        onClick={onClick}\n        className=\"huali-operate-group-item\"\n      >\n        {text}\n      </Button>\n    </React.Fragment>\n  ));\n}\n\nexport default OperateGroups;\n","import React from \"react\";\nimport { Table, Modal } from \"antd\";\nimport { connect } from \"dva\";\n\nimport OperateGroups from \"@shares/OperateGroups\";\n\nclass CatalogTable extends React.PureComponent {\n  handleRemove(index, record) {\n    const { removeCatalog } = this.props;\n    Modal.confirm({\n      title: `你确定要删除目录 ${record.name} 吗？`,\n      content: \"删除目录后，分类中的相关数据也会清除。\",\n      onOk() {\n        removeCatalog(index);\n      }\n    });\n  }\n\n  getColumns() {\n    const { showModal } = this.props;\n    return [\n      {\n        width: 50,\n        title: \"序号\",\n        dataIndex: \"id\",\n        render: (text, record, index) => index + 1\n      },\n      {\n        title: \"目录名称\",\n        dataIndex: \"name\"\n      },\n      {\n        title: \"默认页号\",\n        dataIndex: \"pn\"\n      },\n      {\n        width: 120,\n        title: \"操作\",\n        dataIndex: \"$$operate\",\n        render: (text, record, index) => {\n          const options = [\n            { text: \"编辑\", onClick: () => showModal(record) },\n            { text: \"删除\", onClick: () => this.handleRemove(index, record) }\n          ];\n          return <OperateGroups options={options} />;\n        }\n      }\n    ];\n  }\n\n  render() {\n    const { dataSource } = this.props;\n    return (\n      <Table\n        rowKey=\"id\"\n        columns={this.getColumns()}\n        dataSource={dataSource.toJS()}\n        pagination={false}\n        footer={null}\n        bordered\n      />\n    );\n  }\n}\n\nconst mapState = ({ catalog }) => ({\n  dataSource: catalog.get(\"dataSource\")\n});\n\nconst mapDispatch = {\n  showModal: item => ({\n    type: \"catalog/updateEditModalInfo\",\n    payload: { ...item, visible: true }\n  }),\n  removeCatalog: payload => ({\n    type: \"catalog/removeCatalog\",\n    payload\n  })\n};\n\nexport default connect(mapState, mapDispatch)(CatalogTable);\n","import React from \"react\";\nimport { connect } from \"dva\";\nimport { Form, Modal, Input, InputNumber } from \"antd\";\n\nimport { catalogsValidation } from \"@pages/Catalog/validation\";\nimport { modalFormItemLayout } from \"@consts/form\";\nimport { MIN_PAGE_NUMBER, MAX_PAGE_NUMBER } from \"@consts/config\";\n\nclass ModifyModal extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.handleOk = this.handleOk.bind(this);\n  }\n\n  handleOk() {\n    const { form, modifyCatalogs } = this.props;\n    return new Promise((resolve, reject) => {\n      form.validateFields({ force: true }, (errors, params) => {\n        if (!errors) {\n          modifyCatalogs(params);\n          resolve();\n        }\n      });\n    });\n  }\n\n  render() {\n    const { form, catalogs, closeModal, editModalInfo } = this.props;\n    const { getFieldDecorator } = form;\n\n    const extraData = { visible: editModalInfo.get(\"visible\") };\n\n    if (editModalInfo.get(\"isCreate\")) {\n      extraData.title = \"新增目录\";\n      extraData.contrast = catalogs;\n    } else {\n      extraData.title = \"编辑目录\";\n      extraData.contrast = catalogs.filter(\n        item => item.get(\"id\") !== editModalInfo.get(\"id\")\n      );\n\n      extraData.defaultPn = editModalInfo.get(\"pn\");\n      extraData.defaultName = editModalInfo.get(\"name\");\n    }\n\n    return (\n      <Modal\n        title={extraData.title}\n        visible={extraData.visible}\n        onOk={this.handleOk}\n        onCancel={closeModal}\n        maskClosable={false}\n        destroyOnClose\n      >\n        <Form {...modalFormItemLayout}>\n          <Form.Item label=\"目录名称\">\n            {getFieldDecorator(\"name\", {\n              initialValue: extraData.defaultName,\n              rules: [\n                { required: true, message: \"目录名称不能为空\" },\n                {\n                  validator: (rule, value, callback) =>\n                    catalogsValidation(value, callback, extraData.contrast)\n                }\n              ]\n            })(<Input placeholder=\"请输入目录名称\" />)}\n          </Form.Item>\n          <Form.Item label=\"默认页号\">\n            {getFieldDecorator(\"pn\", {\n              initialValue: extraData.defaultPn\n            })(\n              <InputNumber\n                min={MIN_PAGE_NUMBER}\n                max={MAX_PAGE_NUMBER}\n                placeholder=\"请输入默认页号\"\n                style={{ width: \"100%\" }}\n              />\n            )}\n          </Form.Item>\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nconst mapState = ({ catalog }) => ({\n  catalogs: catalog.get(\"dataSource\"),\n  editModalInfo: catalog.get(\"editModalInfo\")\n});\n\nconst mapDispatch = {\n  closeModal: () => ({\n    type: \"catalog/updateEditModalInfo\",\n    payload: { visible: false }\n  }),\n  modifyCatalogs: payload => ({ type: \"catalog/modifyCatalogs\", payload })\n};\n\nexport default connect(mapState, mapDispatch)(Form.create()(ModifyModal));\n","export const catalogsValidation = (value, callback, contrast) => {\n  if (contrast.find(item => item.get(\"name\") === value.trim())) {\n    callback(\"这个目录已存在，请修改。\");\n  } else {\n    callback();\n  }\n};\n","import React from \"react\";\nimport { Button } from \"antd\";\nimport { connect } from \"dva\";\n\nclass CreateButton extends React.Component {\n  render() {\n    const { showModal } = this.props;\n    return (\n      <Button type=\"primary\" onClick={showModal}>\n        新增目录\n      </Button>\n    );\n  }\n}\n\nconst mapDispatch = {\n  showModal: () => ({\n    type: \"catalog/updateEditModalInfo\",\n    payload: { visible: true, isCreate: true }\n  })\n};\n\nexport default connect(null, mapDispatch)(CreateButton);\n","import React from \"react\";\n\nimport PageArrange from \"@shares/PageArrange\";\n\nimport TableView from \"./TableView\";\nimport ModifyModal from \"./ModifyModal\";\nimport CreateButton from \"./CreateButton\";\n\nfunction CatalogList() {\n  return (\n    <PageArrange>\n      <PageArrange.PageTextAlign align=\"right\">\n        <CreateButton />\n        <ModifyModal />\n      </PageArrange.PageTextAlign>\n\n      <PageArrange.PageSpacing />\n\n      <TableView />\n    </PageArrange>\n  );\n}\n\nexport default CatalogList;\n","import React from 'react';\nimport { List } from 'immutable';\nimport { connect } from 'dva';\nimport { isArray } from 'lodash';\nimport { Table, Modal, Typography } from 'antd';\n\nimport OperateGroups from '@shares/OperateGroups';\n\nclass CategoryTable extends React.PureComponent {\n  handleRemove(index, record) {\n    const { removeCategory } = this.props;\n    Modal.confirm({\n      title: `你确定要删除分类 ${record.name} 吗？`,\n      content: '删除分类后，子分类也会一起删除',\n      onOk() {\n        removeCategory(index);\n      },\n    });\n  }\n\n  handleModify({ id, name, children }) {\n    const { showModifyModal } = this.props;\n    showModifyModal({\n      id,\n      name,\n      children: children.filter(item => !item.isDefault),\n    });\n  }\n\n  getColumns() {\n    const { showRelationModal } = this.props;\n    return [\n      {\n        width: 50,\n        title: '序号',\n        dataIndex: 'id',\n        render: (text, record, index) => index + 1,\n      },\n      {\n        title: '分类名称',\n        dataIndex: 'name',\n      },\n      {\n        title: '二级分类',\n        dataIndex: 'children',\n        render: text =>\n          text.map(item => {\n            const textType = item.isDefault\n              ? { disabled: true }\n              : { code: true };\n            return (\n              <Typography.Text key={item.id} {...textType}>\n                {item.name}\n              </Typography.Text>\n            );\n          }),\n      },\n      {\n        width: 200,\n        title: '绑定目录',\n        dataIndex: 'menus',\n        render: (text, record) => {\n          const option = { onClick: () => showRelationModal(record.id) };\n\n          if (isArray(text) && text.length) {\n            option.text = `已绑定目录 ${text.length} 条，去修改`;\n          } else {\n            option.text = '未绑定目录，现在就去绑定';\n          }\n\n          return <OperateGroups options={[option]} />;\n        },\n      },\n      {\n        width: 120,\n        title: '操作',\n        dataIndex: '$$operate',\n        render: (text, record, index) => {\n          const options = [\n            { text: '编辑', onClick: () => this.handleModify(record) },\n            { text: '删除', onClick: () => this.handleRemove(index, record) },\n          ];\n          return <OperateGroups options={options} />;\n        },\n      },\n    ];\n  }\n\n  getDataSource() {\n    const { relations, categories } = this.props;\n    const groups = relations.groupBy(item => item.get('categoryId'));\n    return categories\n      .map(item => item.set('menus', groups.get(item.get('id')) || List()))\n      .toJS();\n  }\n\n  render() {\n    return (\n      <Table\n        rowKey=\"id\"\n        columns={this.getColumns()}\n        dataSource={this.getDataSource()}\n        childrenColumnName={null}\n        pagination={false}\n        footer={null}\n        bordered\n      />\n    );\n  }\n}\n\nconst mapState = ({ category }) => ({\n  relations: category.get('relations'),\n  categories: category.get('dataSource'),\n});\n\nconst mapDispatch = {\n  showModifyModal: item => ({\n    type: 'category/updateEditModalInfo',\n    payload: { ...item, visible: true },\n  }),\n\n  showRelationModal: payload => ({\n    type: 'category/showRelationModal',\n    payload,\n  }),\n\n  removeCategory: index => ({\n    type: 'category/removeCategory',\n    payload: index,\n  }),\n};\n\nexport default connect(mapState, mapDispatch)(CategoryTable);\n","import React from \"react\";\nimport { Button } from \"antd\";\nimport { connect } from \"dva\";\n\nclass CreateButton extends React.PureComponent {\n  render() {\n    const { showModal } = this.props;\n    return (\n      <Button type=\"primary\" onClick={showModal}>\n        新增分类\n      </Button>\n    );\n  }\n}\n\nconst mapDispatch = {\n  showModal: () => ({\n    type: \"category/updateEditModalInfo\",\n    payload: { visible: true, isCreate: true }\n  })\n};\n\nexport default connect(null, mapDispatch)(CreateButton);\n","import { isArray } from \"lodash\";\n\nexport const categoriesValidation = (value, callback, contrast) => {\n  if (contrast.find(item => item.get(\"name\") === value.trim())) {\n    callback(\"这个分类已存在，请修改。\");\n  } else {\n    callback();\n  }\n};\n\nexport const subCategoriesValidation = (rule, value, callback) => {\n  if (!isArray(value)) {\n    callback();\n  } else if (!value.length) {\n    callback();\n  } else {\n    const error = value.reduce((message, subItem) => {\n      if (message) {\n        return message;\n      }\n      if (!subItem.name) {\n        return \"二级分类名称不能为空\";\n      }\n      if (\n        value.some(({ id, name }) => id !== subItem.id && name === subItem.name)\n      ) {\n        return \"二级分类名称重复\";\n      }\n      return false;\n    }, false);\n    error ? callback(error) : callback();\n  }\n};\n","import React from \"react\";\nimport { Icon, List, Input } from \"antd\";\nimport { trim, isEqual, isArray } from \"lodash\";\n\nimport \"./index.css\";\n\nconst transformValue = value => (isArray(value) ? value : []);\n\nclass SubCategory extends React.Component {\n  constructor(props) {\n    super(props);\n    const prevValue = props.value;\n    this.state = { value: transformValue(prevValue), prevValue };\n\n    this.handleCreate = this.handleCreate.bind(this);\n    this.handleRemove = this.handleRemove.bind(this);\n    this.handleInputBlur = this.handleInputBlur.bind(this);\n    this.handleInputChange = this.handleInputChange.bind(this);\n  }\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    if (!isEqual(nextProps.value, prevState.prevValue)) {\n      const prevValue = nextProps.value;\n      return { value: transformValue(prevValue), prevValue };\n    }\n    return null;\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (\n      !isEqual(nextState.value, this.state.value) ||\n      !isEqual(nextProps.visible, this.props.visible)\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  handleCreate() {\n    const id = Date.now();\n    const { value } = this.state;\n    const { onChange } = this.props;\n    const newValue = [{ id }, ...value];\n    this.setState({ value: newValue }, () => {\n      onChange(newValue);\n    });\n  }\n\n  handleRemove(id) {\n    const { value } = this.state;\n    const { onChange } = this.props;\n    const newValue = value.filter(item => item.id !== id);\n    this.setState({ value: newValue }, () => {\n      onChange(newValue);\n    });\n  }\n\n  handleInputChange(id, name) {\n    const { value } = this.state;\n    const { onChange } = this.props;\n    const newValue = value.map(item => {\n      if (item.id === id) {\n        return { ...item, name };\n      }\n      return item;\n    });\n    this.setState({ value: newValue }, () => {\n      onChange(newValue);\n    });\n  }\n\n  handleInputBlur() {\n    const { value } = this.state;\n    const { onChange } = this.props;\n    const trimmedValue = value.map(item => ({\n      ...item,\n      name: trim(item.name)\n    }));\n    onChange(trimmedValue);\n  }\n\n  render() {\n    const { value } = this.state;\n    return (\n      <List\n        className=\"huali-sub-catagory-list\"\n        header={\n          <a href onClick={this.handleCreate}>\n            添加\n          </a>\n        }\n        bordered\n      >\n        {!value.length && <List.Item key=\"default\">默认</List.Item>}\n        {value.map(({ id, name }) => (\n          <List.Item\n            key={id}\n            actions={[\n              <Icon type=\"close-circle\" onClick={() => this.handleRemove(id)} />\n            ]}\n          >\n            <Input\n              value={name}\n              onBlur={this.handleInputBlur}\n              onChange={event => this.handleInputChange(id, event.target.value)}\n            />\n          </List.Item>\n        ))}\n      </List>\n    );\n  }\n}\n\nexport default SubCategory;\n","import React from \"react\";\nimport { connect } from \"dva\";\nimport { Form, Input, Modal } from \"antd\";\n\nimport { modalFormItemLayout } from \"@consts/form\";\nimport {\n  categoriesValidation,\n  subCategoriesValidation\n} from \"@pages/Category/validation\";\n\nimport SubCategory from \"./SubCategory\";\n\nclass ModifyCategoryModal extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleOk = this.handleOk.bind(this);\n  }\n\n  handleOk() {\n    const { form, modifyCategories } = this.props;\n    return new Promise((resolve, reject) => {\n      form.validateFields({ force: true }, (errors, params) => {\n        if (!errors) {\n          modifyCategories(params);\n          resolve();\n        }\n      });\n    });\n  }\n\n  render() {\n    const { form, categories, closeModal, editModalInfo } = this.props;\n    const { getFieldDecorator } = form;\n\n    const extraData = { visible: editModalInfo.get(\"visible\") };\n\n    if (editModalInfo.get(\"isCreate\")) {\n      extraData.title = \"创建分类\";\n      extraData.contrast = categories;\n    } else {\n      extraData.title = \"编辑分类\";\n      extraData.contrast = categories.filter(\n        item => item.get(\"id\") !== editModalInfo.get(\"id\")\n      );\n      extraData.defaultName = editModalInfo.get(\"name\");\n      const defaultChildren = editModalInfo.get(\"children\");\n      if (defaultChildren) {\n        extraData.defaultChildren = defaultChildren.toJS();\n      }\n    }\n\n    return (\n      <Modal\n        title={extraData.title}\n        visible={extraData.visible}\n        onOk={this.handleOk}\n        onCancel={closeModal}\n        maskClosable={false}\n        destroyOnClose\n      >\n        <Form {...modalFormItemLayout}>\n          <Form.Item label=\"一级分类\">\n            {getFieldDecorator(\"name\", {\n              initialValue: extraData.defaultName,\n              rules: [\n                { required: true, message: \"文件类型名称不能为空\" },\n                {\n                  validator: (rule, value, callback) =>\n                    categoriesValidation(value, callback, extraData.contrast)\n                }\n              ]\n            })(<Input placeholder=\"请输入文件类型名称\" />)}\n          </Form.Item>\n          <Form.Item label=\"二级分类\">\n            {getFieldDecorator(\"children\", {\n              initialValue: extraData.defaultChildren,\n              rules: [{ validator: subCategoriesValidation }]\n            })(<SubCategory />)}\n          </Form.Item>\n        </Form>\n      </Modal>\n    );\n  }\n}\n\nconst mapState = ({ category }) => ({\n  categories: category.get(\"dataSource\"),\n  editModalInfo: category.get(\"editModalInfo\")\n});\n\nconst mapDispatch = {\n  closeModal: () => ({\n    type: \"category/updateEditModalInfo\",\n    payload: { visible: false }\n  }),\n  modifyCategories: payload => ({ type: \"category/modifyCategories\", payload })\n};\n\nexport default connect(mapState, mapDispatch)(Form.create()(ModifyCategoryModal));\n","import React from 'react';\nimport { connect } from 'dva';\nimport { Modal, Transfer } from 'antd';\n\nclass ModifyRelationModal extends React.Component {\n  render() {\n    const {\n      catalogs,\n      closeModal,\n      updateTargetKeys,\n      relationModalInfo,\n      confirmSaveRelations,\n    } = this.props;\n\n    const { visible, targetKeys } = relationModalInfo.toJS();\n\n    return (\n      <Modal\n        title=\"关联目录\"\n        visible={visible}\n        onOk={confirmSaveRelations}\n        onCancel={closeModal}\n        maskClosable={false}\n        destroyOnClose\n      >\n        <Transfer\n          className=\"ant-transfer-customize-list\"\n          rowKey={item => item.id}\n          render={item => item.name}\n          targetKeys={targetKeys}\n          dataSource={catalogs.toJS()}\n          onChange={updateTargetKeys}\n        />\n      </Modal>\n    );\n  }\n}\n\nconst mapState = ({ catalog, category }) => ({\n  catalogs: catalog.get('dataSource'),\n  relationModalInfo: category.get('relationModalInfo'),\n});\n\nconst mapDispatch = {\n  closeModal: () => ({\n    type: 'category/hideRelationModal',\n  }),\n  updateTargetKeys: payload => ({\n    type: 'category/updateTargetKeys',\n    payload,\n  }),\n  confirmSaveRelations: () => ({\n    type: 'category/confirmSaveRelations',\n  }),\n};\n\nexport default connect(mapState, mapDispatch)(ModifyRelationModal);\n","import React from 'react';\n\nimport PageArrange from '@shares/PageArrange';\n\nimport TableView from './TableView';\nimport CreateButton from './CreateButton';\nimport ModifyCategoryModal from './ModifyCategoryModal';\nimport ModifyRelationModal from './ModifyRelationModal';\n\nclass CategoryList extends React.Component {\n  render() {\n    return (\n      <PageArrange>\n        <PageArrange.PageTextAlign align=\"right\">\n          <CreateButton />\n        </PageArrange.PageTextAlign>\n        <PageArrange.PageSpacing />\n        <TableView />\n\n        <ModifyCategoryModal />\n        <ModifyRelationModal />\n      </PageArrange>\n    );\n  }\n}\n\nexport default CategoryList;\n","import React from \"react\";\nimport { Layout } from \"antd\";\nimport { Switch, Route, Redirect } from \"dva/router\";\n\nimport FileInput from \"@pages/FileInput\";\nimport CatalogList from \"@pages/Catalog/CatalogList\";\nimport CategoryList from \"@pages/Category/CategoryList\";\n\nimport { PathEnum } from \"@consts/route\";\n\nconst { Content } = Layout;\n\nconst contentStyle = {\n  height: \"100vh\",\n  overflow: \"hidden\",\n  overflowY: \"auto\",\n  padding: \"75px 10px 0\"\n};\n\nclass RouteConfig extends React.Component {\n  render() {\n    return (\n      <Content style={contentStyle}>\n        <Switch>\n          <Route\n            path={PathEnum.CATALOG}\n            render={() => (\n              <Switch>\n                <Route path={PathEnum.CATALOG_LIST} component={CatalogList} />\n                <Redirect to={PathEnum.CATALOG_LIST} />\n              </Switch>\n            )}\n          />\n          <Route\n            path={PathEnum.CATEGORY}\n            render={() => (\n              <Switch>\n                <Route path={PathEnum.CATEGORY_LIST} component={CategoryList} />\n                <Redirect to={PathEnum.CATEGORY_LIST} />\n              </Switch>\n            )}\n          />\n          <Route path={PathEnum.FILE_INPUT} component={FileInput} />\n          <Redirect to={PathEnum.FILE_INPUT} />\n        </Switch>\n      </Content>\n    );\n  }\n}\n\nexport default RouteConfig;\n","import React from \"react\";\nimport { Router } from \"dva/router\";\nimport { Layout } from \"antd\";\n\nimport HeaderMenu from \"./HeaderMenu\";\nimport RouteConfig from \"./RouteConfig\";\n\nfunction LayoutWrapper({ history }) {\n  return (\n    <Router history={history}>\n      <Layout>\n        <HeaderMenu />\n        <RouteConfig />\n      </Layout>\n    </Router>\n  );\n}\n\nexport default LayoutWrapper;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import dva from \"dva\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { ConfigProvider } from \"antd\";\n\nimport zhCN from \"antd/es/locale/zh_CN\";\nimport \"moment/locale/zh-cn\";\n\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport \"./index.css\";\n\nconst createHashHistory = require(\"history\").createHashHistory;\n\nconst app = dva({ history: createHashHistory() });\n\napp.model(require(\"@pages/Catalog/model.js\").default);\napp.model(require(\"@pages/Category/model.js\").default);\napp.model(require(\"@pages/FileInput/model.js\").default);\n\napp.router(require(\"./layouts\").default);\n\nconst App = app.start();\n\nReactDOM.render(\n  <ConfigProvider locale={zhCN}>\n    <App />\n  </ConfigProvider>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}